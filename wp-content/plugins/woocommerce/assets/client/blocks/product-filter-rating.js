<<<<<<< HEAD
(()=>{var e,t,o,r={6290:(e,t,o)=>{"use strict";o.r(t);const r=window.wp.blocks,n=window.wc.wcSettings;var l=o(1609),c=o(5573);var a=o(7723),i=o(851);const s=window.wp.blockEditor;o(8887);const u=({className:e,rating:t,ratedProductsCount:o})=>{const r=(0,i.A)("wc-block-components-product-rating",e),n={width:t/5*100+"%"},c=(0,a.sprintf)(/* translators: %f is referring to the average rating value */ /* translators: %f is referring to the average rating value */
(0,a.__)("Rated %f out of 5","woocommerce"),t),s={__html:(0,a.sprintf)(/* translators: %s is the rating value wrapped in HTML strong tags. */ /* translators: %s is the rating value wrapped in HTML strong tags. */
(0,a.__)("Rated %s out of 5","woocommerce"),(0,a.sprintf)('<strong class="rating">%f</strong>',t))};return(0,l.createElement)("div",{className:r},(0,l.createElement)("div",{className:"wc-block-components-product-rating__stars",role:"img","aria-label":c},(0,l.createElement)("span",{style:n,dangerouslySetInnerHTML:s})),null!==o?(0,l.createElement)("span",{className:"wc-block-components-product-rating-count"},"(",o,")"):null)},d=window.wc.wcBlocksData,m=window.wp.data;var p=o(6087),f=o(923),g=o.n(f);const w=(0,p.createContext)("page"),v=()=>(0,p.useContext)(w),b=(w.Provider,e=>{const t=v();e=e||t;const o=(0,m.useSelect)((t=>t(d.QUERY_STATE_STORE_KEY).getValueForQueryContext(e,void 0)),[e]),{setValueForQueryContext:r}=(0,m.useDispatch)(d.QUERY_STATE_STORE_KEY);return[o,(0,p.useCallback)((t=>{r(e,t)}),[e,r])]}),k=(e,t,o)=>{const r=v();o=o||r;const n=(0,m.useSelect)((r=>r(d.QUERY_STATE_STORE_KEY).getValueForQueryKey(o,e,t)),[o,e]),{setQueryValue:l}=(0,m.useDispatch)(d.QUERY_STATE_STORE_KEY);return[n,(0,p.useCallback)((t=>{l(o,e,t)}),[o,e,l])]};var y=o(4717);const h=window.wc.wcTypes;var E=o(5574);function _(e){const t=(0,p.useRef)(e);return g()(e,t.current)||(t.current=e),t.current}const B=({queryAttribute:e,queryPrices:t,queryStock:o,queryRating:r,queryState:n,isEditor:l=!1})=>{let c=v();c=`${c}-collection-data`;const[a]=b(c),[i,s]=k("calculate_attribute_counts",[],c),[u,f]=k("calculate_price_range",null,c),[g,w]=k("calculate_stock_status_counts",null,c),[B,C]=k("calculate_rating_counts",null,c),x=_(e||{}),S=_(t),P=_(o),O=_(r);(0,p.useEffect)((()=>{"object"==typeof x&&Object.keys(x).length&&(i.find((e=>(0,h.objectHasProp)(x,"taxonomy")&&e.taxonomy===x.taxonomy))||s([...i,x]))}),[x,i,s]),(0,p.useEffect)((()=>{u!==S&&void 0!==S&&f(S)}),[S,f,u]),(0,p.useEffect)((()=>{g!==P&&void 0!==P&&w(P)}),[P,w,g]),(0,p.useEffect)((()=>{B!==O&&void 0!==O&&C(O)}),[O,C,B]);const[T,I]=(0,p.useState)(l),[L]=(0,y.d7)(T,200);T||I(!0);const R=(0,p.useMemo)((()=>(e=>{const t=e;return Array.isArray(e.calculate_attribute_counts)&&(t.calculate_attribute_counts=(0,E.di)(e.calculate_attribute_counts.map((({taxonomy:e,queryType:t})=>({taxonomy:e,query_type:t})))).asc(["taxonomy","query_type"])),t})(a)),[a]);return(e=>{const{namespace:t,resourceName:o,resourceValues:r=[],query:n={},shouldSelect:l=!0}=e;if(!t||!o)throw new Error("The options object must have valid values for the namespace and the resource properties.");const c=(0,p.useRef)({results:[],isLoading:!0}),a=_(n),i=_(r),s=(()=>{const[,e]=(0,p.useState)();return(0,p.useCallback)((t=>{e((()=>{throw t}))}),[])})(),u=(0,m.useSelect)((e=>{if(!l)return null;const r=e(d.COLLECTIONS_STORE_KEY),n=[t,o,a,i],c=r.getCollectionError(...n);if(c){if(!(0,h.isError)(c))throw new Error("TypeError: `error` object is not an instance of Error constructor");s(c)}return{results:r.getCollection(...n),isLoading:!r.hasFinishedResolution("getCollection",n)}}),[t,o,i,a,l,s]);return null!==u&&(c.current=u),c.current})({namespace:"/wc/store/v1",resourceName:"products/collection-data",query:{...n,page:void 0,per_page:void 0,orderby:void 0,order:void 0,...R},shouldSelect:L})},C=window.wp.components,x=[{label:(0,l.createElement)(u,{key:5,rating:5,ratedProductsCount:null}),value:"5"},{label:(0,l.createElement)(u,{key:4,rating:4,ratedProductsCount:null}),value:"4"},{label:(0,l.createElement)(u,{key:3,rating:3,ratedProductsCount:null}),value:"3"},{label:(0,l.createElement)(u,{key:2,rating:2,ratedProductsCount:null}),value:"2"},{label:(0,l.createElement)(u,{key:1,rating:1,ratedProductsCount:null}),value:"1"}],S=window.wp.url;(0,n.getSettingWithCoercion)("isRenderingPhpTemplate",!1,h.isBoolean);function P({stars:e=5,size:t=24,color:o="black",gap:r=0}){return(0,l.createElement)(l.Fragment,null,Array.from({length:e},((n,c)=>(0,l.createElement)(C.SVG,{key:c,width:t,height:t,viewBox:"0 0 24 24",style:{marginRight:c<e-1?r:0},fill:o},(0,l.createElement)(C.Path,{d:"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"})))))}function O({stars:e,ariaLabel:t}){return(0,l.createElement)(C.Flex,{title:t,"aria-label":t,justify:"flex-start",gap:1},(0,l.createElement)(C.FlexItem,null,(0,l.createElement)(P,{stars:e})),(0,l.createElement)(C.FlexItem,null,(0,a.__)("& up","woocommerce")))}const T=({attributes:e,setAttributes:t})=>{const{showCounts:o,minRating:r,clearButton:n}=e;return(0,l.createElement)(l.Fragment,null,(0,l.createElement)(s.InspectorControls,{key:"inspector"},(0,l.createElement)(C.PanelBody,{title:(0,a.__)("Display","woocommerce")},(0,l.createElement)(C.ToggleControl,{label:(0,a.__)("Display product count","woocommerce"),checked:o,onChange:function(e){t({showCounts:e})}})),(0,l.createElement)(C.PanelBody,{title:(0,a.__)("Minimum rating","woocommerce")},(0,l.createElement)(C.RadioControl,{selected:r,className:"wc-block-rating-filter__rating-control",options:[{label:(0,l.createElement)(O,{stars:4,ariaLabel:(0,a.__)("Four stars and up","woocommerce")}),value:"4"},{label:(0,l.createElement)(O,{stars:3,ariaLabel:(0,a.__)("Three stars and up","woocommerce")}),value:"3"},{label:(0,l.createElement)(O,{stars:2,ariaLabel:(0,a.__)("Two stars and up","woocommerce")}),value:"2"},{label:(0,a.__)("No limit","woocommerce"),value:"0"}],onChange:function(e){t({minRating:e})}}))),(0,l.createElement)(s.InspectorControls,{group:"styles"},(0,l.createElement)(C.PanelBody,{title:(0,a.__)("Display","woocommerce")},(0,l.createElement)(C.ToggleControl,{label:(0,a.__)("Clear button","woocommerce"),checked:n,onChange:e=>t({clearButton:e})}))))},I=(e=[])=>(0,r.getBlockTypes)().map((e=>e.name)).filter((t=>!e.includes(t))),L=(e,t)=>{if(!e)return null;if(0===e.innerBlocks.length)return null;for(const o of e.innerBlocks){if(t(o))return o;const e=L(o,t);if(e)return e}return null},R=["woocommerce/product-filters","woocommerce/product-filter-attribute","woocommerce/product-filter-active","woocommerce/product-filter-price","woocommerce/product-filter-status","woocommerce/product-collection","core/query"];var j=o(2478);o(1925);const N=({children:e})=>(0,l.createElement)("div",{className:"wc-block-product-filter-components-notice"},(0,l.createElement)(C.Icon,{className:"wc-block-product-filter-components-notice__icon",icon:j.A}),(0,l.createElement)("div",{className:"wc-block-product-filter-components-notice__content"},e));o(2252),o(9498);const A=({children:e})=>(0,l.createElement)("div",{className:"wc-block-product-filter-components-initial-disabled"},(0,l.createElement)("div",{className:"wc-block-product-filter-components-initial-disabled-overlay"}),e),q=(e,t)=>{if(e){if(e.name===t)return e.clientId;if(e.innerBlocks&&e.innerBlocks.length>0)for(const o of e.innerBlocks){const e=q(o,t);if(e)return e}}},F={lock:{remove:!0,move:!1}},M=({clientId:e,showClearButton:t,positionIndexToInsertBlock:o,parentClientIdToInsertBlock:n})=>{const[l,c]=(0,p.useState)(t),{clearButtonBlock:a}=(e=>{const{getBlock:t}=(0,m.select)(s.store),o=t(e),r=q(o,"woocommerce/product-filter-clear-button");return{clearButtonBlock:r?t(r):void 0}})(e),i=(e=>{if(!e)return;const{getBlock:t,getBlockParents:o,getBlockOrder:r}=(0,m.select)(s.store),n=o(e,!0),l=n.length?t(n[0]):null,c=r(null==l?void 0:l.clientId);return{blockPositionIndex:null==c?void 0:c.findIndex((t=>t===e)),parentBlockId:null==l?void 0:l.clientId}})(null==a?void 0:a.clientId),[u,d]=(0,p.useState)(void 0),{getBlock:f}=(0,m.useSelect)((e=>({getBlock:e(s.store).getBlock}))),{insertBlock:g,removeBlock:w,updateBlockAttributes:v}=(0,m.useDispatch)(s.store);(0,p.useEffect)((()=>{if(t!==l&&(!1===t&&Boolean(null==a?void 0:a.clientId)&&(v(null==a?void 0:a.clientId,{lock:{remove:!1,move:!1}}),w(null==a?void 0:a.clientId,!1),d(i)),!0===t&&!a)){let t=function(){if(u&&f(u.parentBlockId)){const{blockPositionIndex:e,parentBlockId:t}=u;return g((0,r.createBlock)("woocommerce/product-filter-clear-button",F),e,t,!1),d(void 0),!0}return!1}();t||(t=void 0===o&&void 0===n&&!!f(n)&&(g((0,r.createBlock)("woocommerce/product-filter-clear-button",F),o,n,!1),d(void 0),!0)),t||(t=function(){const t=f(e),o=L(t,(function(e){return"core/group"===e.name}));if(!o)return!1;const n=q(o,"core/heading"),l=o.innerBlocks.length;return!!Boolean(n)&&(g((0,r.createBlock)("woocommerce/product-filter-clear-button",F),l,null==o?void 0:o.clientId,!1),!0)}()),t||(g((0,r.createBlock)("woocommerce/product-filter-clear-button",F),0,e,!1),d(void 0),t=!0)}c(t)}),[t,l])},Y=(0,C.withSpokenMessages)((e=>{var t;const{attributes:o,setAttributes:r}=e,{isPreview:c,showCounts:d,minRating:m}=o,{children:f,...g}=(0,s.useInnerBlocksProps)((0,s.useBlockProps)(),{allowedBlocks:I(R),template:[["core/group",{layout:{type:"flex",flexWrap:"nowrap"},metadata:{name:(0,a.__)("Header","woocommerce")},style:{spacing:{blockGap:"0"}}},[["core/heading",{level:3,content:(0,a.__)("Rating","woocommerce")}],["woocommerce/product-filter-clear-button",{lock:{remove:!0,move:!1}}]]],["woocommerce/product-filter-checkbox-list",{lock:{remove:!0}}]]}),[w]=b(),{results:v,isLoading:y}=B({queryRating:!0,queryState:w,isEditor:!0}),[E,_]=(0,p.useState)(c?x:[]),C=!c&&y&&0===E.length,P=(0,p.useMemo)((()=>((e="filter_rating")=>{const t=(o=e,window?(0,S.getQueryArg)(window.location.href,o):null);var o;return t?(0,h.isString)(t)?t.split(","):t:[]})("rating_filter")),[]),[O]=k("rating",P);if((0,p.useEffect)((()=>{var e;if(y||c)return;if(0===(null==v||null===(e=v.rating_counts)||void 0===e?void 0:e.length))return void _(x);const t="string"==typeof m?parseFloat(m):0,o=v.rating_counts.sort(((e,t)=>t.rating-e.rating)).filter((({rating:e})=>e>=t)).map((({rating:e,count:t})=>({label:(0,l.createElement)(u,{key:e,rating:e,ratedProductsCount:d?t:null}),value:null==e?void 0:e.toString()})));_(o)}),[d,c,v,y,O,m]),M({clientId:e.clientId,showClearButton:o.clearButton}),!y&&0===E.length)return null;if(!(0,n.getSettingWithCoercion)("hasFilterableProducts",!1,h.isBoolean))return null;const L=!(y||null!==(t=v.rating_counts)&&void 0!==t&&t.length);return(0,l.createElement)(l.Fragment,null,(0,l.createElement)(T,{attributes:o,setAttributes:r}),(0,l.createElement)("div",{...g},(0,l.createElement)(A,null,L&&(0,l.createElement)(N,null,(0,a.__)("Your store doesn't have any products with ratings yet. This filter option will display when a product receives a review.","woocommerce")),(0,l.createElement)("div",{className:(0,i.A)({"is-loading":C})},(0,l.createElement)(s.BlockContextProvider,{value:{filterData:{items:E,isLoading:C}}},f)))))})),Q=JSON.parse('{"name":"woocommerce/product-filter-rating","version":"1.0.0","title":"Rating (Experimental)","description":"Enable customers to filter the product collection by rating.","category":"woocommerce","keywords":[],"supports":{"interactivity":true,"color":{"background":false,"text":true}},"ancestor":["woocommerce/product-filters"],"usesContext":["query","filterParams"],"attributes":{"className":{"type":"string","default":""},"showCounts":{"type":"boolean","default":false},"minRating":{"type":"string","default":"0"},"isPreview":{"type":"boolean","default":false},"clearButton":{"type":"boolean","default":true}},"textdomain":"woocommerce","apiVersion":3,"$schema":"https://schemas.wp.org/trunk/block.json"}');(()=>{const{experimentalBlocksEnabled:e}=(0,n.getSetting)("wcBlocksConfig",{experimentalBlocksEnabled:!1});return e})()&&(0,r.registerBlockType)(Q,{icon:()=>(0,l.createElement)(c.SVG,{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,l.createElement)("line",{x1:"4",y1:"15.25",x2:"20",y2:"15.25",stroke:"currentColor",strokeWidth:"1.5"}),(0,l.createElement)("line",{x1:"4",y1:"19.25",x2:"13",y2:"19.25",stroke:"currentColor",strokeWidth:"1.5"}),(0,l.createElement)(c.Path,{d:"M8.92572 3.95425C9.01742 3.76843 9.28238 3.76844 9.37409 3.95425L10.4877 6.21072C10.5241 6.28451 10.5945 6.33565 10.676 6.34748L13.1661 6.70933C13.3712 6.73912 13.4531 6.99112 13.3047 7.13575L11.5028 8.89217C11.4439 8.94961 11.417 9.03236 11.4309 9.11346L11.8563 11.5936C11.8913 11.7978 11.6769 11.9535 11.4935 11.8571L9.26624 10.6862C9.19341 10.6479 9.1064 10.6479 9.03357 10.6862L6.80629 11.8571C6.62288 11.9535 6.40853 11.7978 6.44355 11.5936L6.86893 9.11346C6.88283 9.03236 6.85595 8.94961 6.79703 8.89217L4.99512 7.13575C4.84674 6.99112 4.92862 6.73912 5.13367 6.70933L7.62385 6.34748C7.70527 6.33565 7.77566 6.28451 7.81208 6.21072L8.92572 3.95425Z",stroke:"currentColor",strokeWidth:"1.5",strokeLinejoin:"round",fill:"none"})),attributes:{...Q.attributes},edit:Y,save:()=>{const e=s.useBlockProps.save(),t=s.useInnerBlocksProps.save(e);return(0,l.createElement)("div",{...t})}})},8887:()=>{},9498:()=>{},1925:()=>{},2252:()=>{},1609:e=>{"use strict";e.exports=window.React},6087:e=>{"use strict";e.exports=window.wp.element},7723:e=>{"use strict";e.exports=window.wp.i18n},923:e=>{"use strict";e.exports=window.wp.isShallowEqual},5573:e=>{"use strict";e.exports=window.wp.primitives}},n={};function l(e){var t=n[e];if(void 0!==t)return t.exports;var o=n[e]={exports:{}};return r[e].call(o.exports,o,o.exports,l),o.exports}l.m=r,e=[],l.O=(t,o,r,n)=>{if(!o){var c=1/0;for(u=0;u<e.length;u++){for(var[o,r,n]=e[u],a=!0,i=0;i<o.length;i++)(!1&n||c>=n)&&Object.keys(l.O).every((e=>l.O[e](o[i])))?o.splice(i--,1):(a=!1,n<c&&(c=n));if(a){e.splice(u--,1);var s=r();void 0!==s&&(t=s)}}return t}n=n||0;for(var u=e.length;u>0&&e[u-1][2]>n;u--)e[u]=e[u-1];e[u]=[o,r,n]},l.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return l.d(t,{a:t}),t},o=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,l.t=function(e,r){if(1&r&&(e=this(e)),8&r)return e;if("object"==typeof e&&e){if(4&r&&e.__esModule)return e;if(16&r&&"function"==typeof e.then)return e}var n=Object.create(null);l.r(n);var c={};t=t||[null,o({}),o([]),o(o)];for(var a=2&r&&e;"object"==typeof a&&!~t.indexOf(a);a=o(a))Object.getOwnPropertyNames(a).forEach((t=>c[t]=()=>e[t]));return c.default=()=>e,l.d(n,c),n},l.d=(e,t)=>{for(var o in t)l.o(t,o)&&!l.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},l.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),l.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.j=1631,(()=>{var e={1631:0};l.O.j=t=>0===e[t];var t=(t,o)=>{var r,n,[c,a,i]=o,s=0;if(c.some((t=>0!==e[t]))){for(r in a)l.o(a,r)&&(l.m[r]=a[r]);if(i)var u=i(l)}for(t&&t(o);s<c.length;s++)n=c[s],l.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return l.O(u)},o=self.webpackChunkwebpackWcBlocksMainJsonp=self.webpackChunkwebpackWcBlocksMainJsonp||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))})();var c=l.O(void 0,[94],(()=>l(6290)));c=l.O(c),((this.wc=this.wc||{}).blocks=this.wc.blocks||{})["product-filter-rating"]=c})();
=======
(()=>{var e,t,r,o={953:(e,t,r)=>{"use strict";r.r(t);const o=window.wp.blocks,n=window.wc.wcSettings;var l=r(1609),a=r(5573);const c=(0,l.createElement)(a.SVG,{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,l.createElement)(a.Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M6 10C7.10457 10 8 9.10457 8 8C8 6.89543 7.10457 6 6 6C4.89543 6 4 6.89543 4 8C4 9.10457 4.89543 10 6 10ZM20 8.75H11.1111V7.25L20 7.25V8.75ZM20 15.75L11.1111 15.75V14.25L20 14.25V15.75ZM8 15C8 16.1046 7.10457 17 6 17C4.89543 17 4 16.1046 4 15C4 13.8954 4.89543 13 6 13C7.10457 13 8 13.8954 8 15Z",fill:"currentColor"}));var s=r(7723),i=r(851);const u=window.wp.blockEditor;r(8887);const p=({className:e,rating:t,ratedProductsCount:r})=>{const o=(0,i.A)("wc-block-components-product-rating",e),n={width:t/5*100+"%"},a=(0,s.sprintf)(/* translators: %f is referring to the average rating value */ /* translators: %f is referring to the average rating value */
(0,s.__)("Rated %f out of 5","woocommerce"),t),c={__html:(0,s.sprintf)(/* translators: %s is the rating value wrapped in HTML strong tags. */ /* translators: %s is the rating value wrapped in HTML strong tags. */
(0,s.__)("Rated %s out of 5","woocommerce"),(0,s.sprintf)('<strong class="rating">%f</strong>',t))};return(0,l.createElement)("div",{className:o},(0,l.createElement)("div",{className:"wc-block-components-product-rating__stars",role:"img","aria-label":a},(0,l.createElement)("span",{style:n,dangerouslySetInnerHTML:c})),null!==r?(0,l.createElement)("span",{className:"wc-block-components-product-rating-count"},"(",r,")"):null)},d=window.wc.wcBlocksData,m=window.wp.data;var w=r(6087),g=r(923),y=r.n(g);const _=(0,w.createContext)("page"),f=()=>(0,w.useContext)(_),v=(_.Provider,e=>{const t=f();e=e||t;const r=(0,m.useSelect)((t=>t(d.QUERY_STATE_STORE_KEY).getValueForQueryContext(e,void 0)),[e]),{setValueForQueryContext:o}=(0,m.useDispatch)(d.QUERY_STATE_STORE_KEY);return[r,(0,w.useCallback)((t=>{o(e,t)}),[e,o])]}),b=(e,t,r)=>{const o=f();r=r||o;const n=(0,m.useSelect)((o=>o(d.QUERY_STATE_STORE_KEY).getValueForQueryKey(r,e,t)),[r,e]),{setQueryValue:l}=(0,m.useDispatch)(d.QUERY_STATE_STORE_KEY);return[n,(0,w.useCallback)((t=>{l(r,e,t)}),[r,e,l])]};var E=r(4717);const h=window.wc.wcTypes;var C=r(5574);function S(e){const t=(0,w.useRef)(e);return y()(e,t.current)||(t.current=e),t.current}const k=({queryAttribute:e,queryPrices:t,queryStock:r,queryRating:o,queryState:n,isEditor:l=!1})=>{let a=f();a=`${a}-collection-data`;const[c]=v(a),[s,i]=b("calculate_attribute_counts",[],a),[u,p]=b("calculate_price_range",null,a),[g,y]=b("calculate_stock_status_counts",null,a),[_,k]=b("calculate_rating_counts",null,a),x=S(e||{}),O=S(t),T=S(r),P=S(o);(0,w.useEffect)((()=>{"object"==typeof x&&Object.keys(x).length&&(s.find((e=>(0,h.objectHasProp)(x,"taxonomy")&&e.taxonomy===x.taxonomy))||i([...s,x]))}),[x,s,i]),(0,w.useEffect)((()=>{u!==O&&void 0!==O&&p(O)}),[O,p,u]),(0,w.useEffect)((()=>{g!==T&&void 0!==T&&y(T)}),[T,y,g]),(0,w.useEffect)((()=>{_!==P&&void 0!==P&&k(P)}),[P,k,_]);const[j,N]=(0,w.useState)(l),[R]=(0,E.d7)(j,200);j||N(!0);const M=(0,w.useMemo)((()=>(e=>{const t=e;return Array.isArray(e.calculate_attribute_counts)&&(t.calculate_attribute_counts=(0,C.di)(e.calculate_attribute_counts.map((({taxonomy:e,queryType:t})=>({taxonomy:e,query_type:t})))).asc(["taxonomy","query_type"])),t})(c)),[c]);return(e=>{const{namespace:t,resourceName:r,resourceValues:o=[],query:n={},shouldSelect:l=!0}=e;if(!t||!r)throw new Error("The options object must have valid values for the namespace and the resource properties.");const a=(0,w.useRef)({results:[],isLoading:!0}),c=S(n),s=S(o),i=(()=>{const[,e]=(0,w.useState)();return(0,w.useCallback)((t=>{e((()=>{throw t}))}),[])})(),u=(0,m.useSelect)((e=>{if(!l)return null;const o=e(d.COLLECTIONS_STORE_KEY),n=[t,r,c,s],a=o.getCollectionError(...n);if(a){if(!(0,h.isError)(a))throw new Error("TypeError: `error` object is not an instance of Error constructor");i(a)}return{results:o.getCollection(...n),isLoading:!o.hasFinishedResolution("getCollection",n)}}),[t,r,s,c,l,i]);return null!==u&&(a.current=u),a.current})({namespace:"/wc/store/v1",resourceName:"products/collection-data",query:{...n,page:void 0,per_page:void 0,orderby:void 0,order:void 0,...M},shouldSelect:R})},x=window.wc.blocksComponents,O=window.wp.components,T=[{label:(0,l.createElement)(p,{key:5,rating:5,ratedProductsCount:null}),value:"5"},{label:(0,l.createElement)(p,{key:4,rating:4,ratedProductsCount:null}),value:"4"},{label:(0,l.createElement)(p,{key:3,rating:3,ratedProductsCount:null}),value:"3"},{label:(0,l.createElement)(p,{key:2,rating:2,ratedProductsCount:null}),value:"2"},{label:(0,l.createElement)(p,{key:1,rating:1,ratedProductsCount:null}),value:"1"}],P=window.wp.url;(0,n.getSettingWithCoercion)("isRenderingPhpTemplate",!1,h.isBoolean);const j=(0,w.createContext)({}),N=({attributes:e,setAttributes:t})=>{const{showCounts:r,displayStyle:o,selectType:n}=e;return(0,l.createElement)(u.InspectorControls,{key:"inspector"},(0,l.createElement)(O.PanelBody,{title:(0,s.__)("Display Settings","woocommerce")},(0,l.createElement)(O.ToggleControl,{label:(0,s.__)("Display product count","woocommerce"),checked:r,onChange:()=>t({showCounts:!r})}),"dropdown"===o&&(0,l.createElement)(O.__experimentalToggleGroupControl,{label:(0,s.__)("Allow selecting multiple options?","woocommerce"),value:n||"multiple",onChange:e=>t({selectType:e}),className:"wc-block-attribute-filter__multiple-toggle"},(0,l.createElement)(O.__experimentalToggleGroupControlOption,{value:"multiple",label:(0,s._x)("Multiple","Number of filters","woocommerce")}),(0,l.createElement)(O.__experimentalToggleGroupControlOption,{value:"single",label:(0,s._x)("Single","Number of filters","woocommerce")})),(0,l.createElement)(O.__experimentalToggleGroupControl,{label:(0,s.__)("Display Style","woocommerce"),value:o,onChange:e=>t({displayStyle:e}),className:"wc-block-attribute-filter__display-toggle"},(0,l.createElement)(O.__experimentalToggleGroupControlOption,{value:"list",label:(0,s.__)("List","woocommerce")}),(0,l.createElement)(O.__experimentalToggleGroupControlOption,{value:"dropdown",label:(0,s.__)("Dropdown","woocommerce")}))))},R=({placeholder:e})=>(0,l.createElement)("div",{className:"wc-interactivity-dropdown"},(0,l.createElement)("div",{className:"wc-interactivity-dropdown__dropdown"},(0,l.createElement)("div",{className:"wc-interactivity-dropdown__dropdown-selection",tabIndex:0},(0,l.createElement)("span",{className:"wc-interactivity-dropdown__placeholder"},e),(0,l.createElement)("span",{className:"wc-interactivity-dropdown__svg-container"},(0,l.createElement)("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",width:"30",height:"30"},(0,l.createElement)("path",{d:"M17.5 11.6L12 16l-5.5-4.4.9-1.2L12 14l4.5-3.6 1 1.2z"}))))));r(2252);const M=()=>(0,l.createElement)(O.Notice,{status:"warning",isDismissible:!1},(0,l.createElement)("p",null,(0,s.__)("Your store doesn't have any products with ratings yet. This filter option will display when a product receives a review.","woocommerce"))),q=(0,O.withSpokenMessages)((e=>{const t=e.attributes,r=(0,u.useBlockProps)(),o=(()=>{const{wrapper:e}=(0,w.useContext)(j);return t=>{e&&e.current&&(e.current.hidden=!t)}})(),[a]=v(),{results:c,isLoading:d}=k({queryRating:!0,queryState:a,isEditor:!0}),[m,g]=(0,w.useState)(t.isPreview?T:[]),y=!t.isPreview&&d&&0===m.length,_=!t.isPreview&&d,f=(0,w.useMemo)((()=>((e="filter_rating")=>{const t=(r=e,window?(0,P.getQueryArg)(window.location.href,r):null);var r;return t?(0,h.isString)(t)?t.split(","):t:[]})("rating_filter")),[]),[E]=(0,w.useState)(f),[C]=b("rating",f),[S,q]=(0,w.useState)(!1);return(0,w.useEffect)((()=>{if(d||t.isPreview)return;const e=!d&&(0,h.objectHasProp)(c,"rating_counts")&&Array.isArray(c.rating_counts)?[...c.rating_counts].reverse():[];if(0===e.length)return g(T),void q(!0);const r=e.filter((e=>(0,h.isObject)(e)&&Object.keys(e).length>0)).map((e=>{var r;return{label:(0,l.createElement)(p,{key:null==e?void 0:e.rating,rating:null==e?void 0:e.rating,ratedProductsCount:t.showCounts?null==e?void 0:e.count:null}),value:null==e||null===(r=e.rating)||void 0===r?void 0:r.toString()}}));g(r)}),[t.showCounts,t.isPreview,c,d,C]),(d||0!==m.length)&&(0,n.getSettingWithCoercion)("hasFilterableProducts",!1,h.isBoolean)?(o(!0),(0,l.createElement)(l.Fragment,null,(0,l.createElement)(N,{...e}),(0,l.createElement)("div",{...r},(0,l.createElement)(O.Disabled,null,S&&(0,l.createElement)(M,null),(0,l.createElement)("div",{className:(0,i.A)(`style-${t.displayStyle}`,{"is-loading":y})},"dropdown"===t.displayStyle?(0,l.createElement)(l.Fragment,null,(0,l.createElement)(R,{placeholder:"single"===t.selectType?(0,s.__)("Select a rating","woocommerce"):(0,s.__)("Select ratings","woocommerce")})):(0,l.createElement)(x.CheckboxList,{options:m,checked:E,onChange:()=>{},isLoading:y,isDisabled:_})))))):(o(!1),null)})),A=JSON.parse('{"name":"woocommerce/product-filter-rating","version":"1.0.0","title":"Filter Options","description":"Enable customers to filter the product collection by rating.","category":"woocommerce","keywords":["WooCommerce"],"supports":{"interactivity":true,"inserter":false,"color":{"background":false,"text":true}},"ancestor":["woocommerce/product-filter"],"usesContext":["query","queryId"],"attributes":{"className":{"type":"string","default":""},"showCounts":{"type":"boolean","default":false},"displayStyle":{"type":"string","default":"list"},"selectType":{"type":"string","default":"multiple"},"isPreview":{"type":"boolean","default":false}},"textdomain":"woocommerce","apiVersion":3,"$schema":"https://schemas.wp.org/trunk/block.json"}');(()=>{const{experimentalBlocksEnabled:e}=(0,n.getSetting)("wcBlocksConfig",{experimentalBlocksEnabled:!1});return e})()&&(0,o.registerBlockType)(A,{icon:c,attributes:{...A.attributes},edit:q})},8887:()=>{},2252:()=>{},1609:e=>{"use strict";e.exports=window.React},6087:e=>{"use strict";e.exports=window.wp.element},7723:e=>{"use strict";e.exports=window.wp.i18n},923:e=>{"use strict";e.exports=window.wp.isShallowEqual},5573:e=>{"use strict";e.exports=window.wp.primitives}},n={};function l(e){var t=n[e];if(void 0!==t)return t.exports;var r=n[e]={exports:{}};return o[e].call(r.exports,r,r.exports,l),r.exports}l.m=o,e=[],l.O=(t,r,o,n)=>{if(!r){var a=1/0;for(u=0;u<e.length;u++){for(var[r,o,n]=e[u],c=!0,s=0;s<r.length;s++)(!1&n||a>=n)&&Object.keys(l.O).every((e=>l.O[e](r[s])))?r.splice(s--,1):(c=!1,n<a&&(a=n));if(c){e.splice(u--,1);var i=o();void 0!==i&&(t=i)}}return t}n=n||0;for(var u=e.length;u>0&&e[u-1][2]>n;u--)e[u]=e[u-1];e[u]=[r,o,n]},l.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return l.d(t,{a:t}),t},r=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,l.t=function(e,o){if(1&o&&(e=this(e)),8&o)return e;if("object"==typeof e&&e){if(4&o&&e.__esModule)return e;if(16&o&&"function"==typeof e.then)return e}var n=Object.create(null);l.r(n);var a={};t=t||[null,r({}),r([]),r(r)];for(var c=2&o&&e;"object"==typeof c&&!~t.indexOf(c);c=r(c))Object.getOwnPropertyNames(c).forEach((t=>a[t]=()=>e[t]));return a.default=()=>e,l.d(n,a),n},l.d=(e,t)=>{for(var r in t)l.o(t,r)&&!l.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},l.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),l.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.j=1631,(()=>{var e={1631:0};l.O.j=t=>0===e[t];var t=(t,r)=>{var o,n,[a,c,s]=r,i=0;if(a.some((t=>0!==e[t]))){for(o in c)l.o(c,o)&&(l.m[o]=c[o]);if(s)var u=s(l)}for(t&&t(r);i<a.length;i++)n=a[i],l.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return l.O(u)},r=self.webpackChunkwebpackWcBlocksMainJsonp=self.webpackChunkwebpackWcBlocksMainJsonp||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var a=l.O(void 0,[94],(()=>l(953)));a=l.O(a),((this.wc=this.wc||{}).blocks=this.wc.blocks||{})["product-filter-rating"]=a})();
>>>>>>> 8d244dd10d2e32e461d508a54a2cfd79fc236c90
